PROYECTO INSTALACIÓN Y CONFIGURACIÓN DE UN SERVIDOR DE AUDIO

INTRODUCCIÓN

Los servicios de audio se adaptan a nuevas necesidades de los usuarios, lo que permite que las radios de cualquier lugar sean escuchas como si 
fueran radios locales.

En este proyecto se realizará la instalación, configuración de un servidor de audio para lo cual se requiere trabajar con icecast2 y ices2.

Icecast2 es un servidor de streaming que permite la creación de una estación de radio en internet. Soporta archivos Ogg y Mp3.
Cualquier usuario a nivel mundial puede conectarse a nuestra emisora y escuchar las canciones o programas que se emitan en tiempo real.

Icecast2 requiere de un cliente a quien entregará los contenidos para que funcione. Estos pueden ser los archivos de música, un micrófono conectado
a la tarjeta de sonido, el cliente es Ices2.


DESARROLLO

Para el desarrollo de este proyecto a continuación se detalla los pasos a seguir:

PARTE 1 INSTALACIÓN

Primeramente debemos instalar icecast2(streaming), ice2(enviar los contenidos) y vorbis-tools. 
Para esto el comando a utilizar: sudo apt-get icecast2 ices2 vorbis-tools.

Ahora verificaresmo la versión del servicio que hemos instalado 

Imagen 1. Versión del servicio instalado 

¿Qué son las vorbis-tools?
Son herramientas de línea de comando para ficheros de sonido con extensión Ogg, siendo utilizados para reproducir o editar estos ficheros.

Vorbis Tools contiene: 
Oggdec: Decodificador de archivos ogg
Oggenc: Codificador (convierte archivos .wav en ficheros Ogg Vorbis)
ogg123: Herramienta de reproducción
vcut: Divide ficheros en ogg
vorbiscomment: Editor de comentarios de ogg

¿Qué otros formatos, además de ogg y mp3 soporta icecast2?
Soporta formatos como: Ogg Vorgis, MP3, Ogg Speex, OggFLAC, Ogg Theora.

¿Cómo es el tipo MIME de los ficheros ogg?
Los MIME Types es la manera estandard de enviar contenido por medio de la red.especificando los tipos de datos como son: audio, video, imagen, texto.
Un MiME de los ficheros de ogg es: audio/ogg Que es un archivo de audio en el formato de contenedos Ogg. Vorbis es el códec de audio utilizado en este contenedor
audio representa a cualquier tipo de archivos de audio.

¿Cuál es la diferencia entre una transmisión unicast y una multicast? Averiguemos si icecast2 tiene soporte para ambas formas de transmisión.
Unicast es el tráfico dirigido hacia un equipo de la red. 
Una rama (frame) es enviada desde una interfaz de salida a una interfaz de destino, se la conoce como uno-a-uno.

Multicast es el tráfico dirigido hacia un grupo de equipos de la red.
Envía una interfaz de salida a un grupo específico de interfaces de destino, loo que permite ahorrar el ancho de banda.

icecast2 puede transmitir mediante multicast, unicast es muy limitante.


PARTE 2 CONFIGURACIÓN DEL SERVIDOR

Para proceder con la configuración de servidor debemos ingresar mediante el comando sudo gedit /etc/icecast2/icecast.xml en donde debemos modificar en el fichero icecast2 
los siguientes parámetros: 
Nombre usuario del administrador y contraseña
Clave del transmisor 
Clave del enviador
Usuario y contraseña de la administración mediante la página web. 
Cambiar el nombre uoc en hostname.

Imagen 2. Configuración en el fichero icecast2


PARTE 3 HABILITACIÓN DEL SERVICIO 

En este paso se debe configurar el puerto en nuestro caso colocamso el puerto 8080 como se puede observar en la imagen 2

Debemos habilitar el servicio icecast2.mxl, editar el siguiente comando sudo gedit /etc/default/icecast2 para editar el fichero icecast, en donde se debe cambiar la última 
línea ENABLE=true

Imagen 3. Cambio en la última línea por ENABLE=true

A continuación se debe arrancar el servicio mediante el comando service icecast2 start


PARTE 4 HABILITACIÓN DEL SERVICIO

¿Si quisieramos parar el servicio qué comando se usaría?
El comando a utilizar es stop

Con el comando netsat-ntl verificamos si nuestro puerto está escuchandose.

Imagen 4. Verificación puerto escuchandose.

Pero que ¿significa la opción -ntl?
-NTL es una opción del comando NETSTAT que permite visualizar los puertos y direcciones en formato numérico 

Hagamos una prueba, conectémonos a la página de administración del service icecast2, coloquemos en el navegador http://ip del servidor:puerto.

Imagen 5. Conexión a la página de administración

CONFIGURACIÓN DEL EMISOR (ices2)

Vamos a configurar el emisor ices2 es la fuente de audio que enviara los datos al servidor para que los retrasmita a los ucuarios conectados. Comando a utilizar 
sudo mkdir /etc/ices2

Copiamos la lista de música playlist.xml que fue creado anteriormente. Comando sudo cp /usr/share/doc/ices2/examples/ices-playlist.xml /etc/ices2/ 

A continuación creamos un directorio para almacenar los log.Comando sudo mkdir /var/log/ices2

Ahora debemos editar el fichero de configuración que anteriormente lo copiamos, esto con el fin de adaptarlo a los parámetros de nuestro servidor icecast. Para esto utilizamos 
el comando sudo gedit /etc/ices2/ices-playlist.xml

Modificamos La sección stream; input

Imagen 6. Configuración playlist.xml (stream e input)

También debemos configurar la sección instance en donde se configura la conexión par que el ices2 se pueda conectar al servidor icecast.

Imagen 7. Configuración playlist.xml (instance)

Adicionalmente se debe generar el archivo milista.txt dentro de la siguiente ruta /etc/ices2/milista.txt

El archivo contendrá la lista de música que se reproducirá en la emisora, añadiendo la ruta de estos ficheros para esto se puede utilizar la sentencia 
sudo find / -iname "*.ogg" >> /etc/ices2/milista.txt


PARTE 5 

En el fichero playlist.xml podemos configurar la calidad a la cual se transmitirá, este valor es importante debido a que está relacionado con la cantidad de paquetes de datos 
que son trnasmitos del punto A al punto B en un intervalo de timepo determinado.  

Imagen 8. 

 





